"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4185],{3626:(e,n,d)=>{d.r(n),d.d(n,{assets:()=>t,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>a});var i=d(4848),l=d(8453);const s={},r="DefenseRule",c={id:"client/lua-api/defense-api/defense-rule",title:"DefenseRule",description:"See living:adddefenserule()",source:"@site/docs/01-client/02-lua-api/05-defense-api/01-defense-rule.md",sourceDirName:"01-client/02-lua-api/05-defense-api",slug:"/client/lua-api/defense-api/defense-rule",permalink:"/client/lua-api/defense-api/defense-rule",draft:!1,unlisted:!1,editUrl:"https://github.com/Hub-OS/documentation-website/tree/master/docs/01-client/02-lua-api/05-defense-api/01-defense-rule.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"clientSidebar",previous:{title:"TurnGauge",permalink:"/client/lua-api/attack-api/turn-gauge"},next:{title:"IntangibleRule",permalink:"/client/lua-api/defense-api/intangible-rule"}},t={},a=[{value:"<code>DefenseRule.new(defense_priority, defense_order)</code>",id:"defenserulenewdefense_priority-defense_order",level:3},{value:"<code>defense_rule:replaced()</code>",id:"defense_rulereplaced",level:3},{value:"<code>defense_rule.on_replace_func = function()</code>",id:"defense_ruleon_replace_func--function",level:3},{value:"<code>defense_rule.can_block_func = function(judge, attacker, defender, hit_props)</code>",id:"defense_rulecan_block_func--functionjudge-attacker-defender-hit_props",level:3},{value:"<code>defense_rule.filter_statuses_func = function(hit_props): HitProps</code>",id:"defense_rulefilter_statuses_func--functionhit_props-hitprops",level:3},{value:"DefenseVirusBody",id:"defensevirusbody",level:2},{value:"<code>DefenseVirusBody.new()</code>",id:"defensevirusbodynew",level:3},{value:"DefenseJudge",id:"defensejudge",level:2},{value:"<code>judge:block_damage()</code>",id:"judgeblock_damage",level:3},{value:"<code>judge:block_impact()</code>",id:"judgeblock_impact",level:3},{value:"<code>judge:damage_blocked()</code>",id:"judgedamage_blocked",level:3},{value:"<code>judge:impact_blocked()</code>",id:"judgeimpact_blocked",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"defenserule",children:"DefenseRule"}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsxs)(n.a,{href:"/client/lua-api/entity-api/living#livingadd_defense_ruledefense_rule",children:["living",":add_defense_rule","()"]})]}),"\n",(0,i.jsx)(n.h3,{id:"defenserulenewdefense_priority-defense_order",children:(0,i.jsx)(n.code,{children:"DefenseRule.new(defense_priority, defense_order)"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"priority"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"DefensePriority.Barrier"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"DefensePriority.Body"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"DefensePriority.Action"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"DefensePriority.Trap"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Additionally causes all players to see ",(0,i.jsx)(n.code,{children:"????"})," in the UI"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"DefensePriority.Last"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"defense_order"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"DefenseOrder.Always"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"DefenseOrder.CollisionOnly"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Adding a DefenseRule to an entity when a DefenseRule already exists with the same priorty will replace the existing rule."}),"\n",(0,i.jsx)(n.p,{children:"Returns a new DefenseRule."}),"\n",(0,i.jsx)(n.h3,{id:"defense_rulereplaced",children:(0,i.jsx)(n.code,{children:"defense_rule:replaced()"})}),"\n",(0,i.jsx)(n.p,{children:"Returns true if a DefenseRule with the same priority replaced this rule."}),"\n",(0,i.jsx)(n.h3,{id:"defense_ruleon_replace_func--function",children:(0,i.jsx)(n.code,{children:"defense_rule.on_replace_func = function()"})}),"\n",(0,i.jsx)(n.p,{children:"Called when a DefenseRule with the same priority replaced this rule."}),"\n",(0,i.jsx)(n.h3,{id:"defense_rulecan_block_func--functionjudge-attacker-defender-hit_props",children:(0,i.jsx)(n.code,{children:"defense_rule.can_block_func = function(judge, attacker, defender, hit_props)"})}),"\n",(0,i.jsxs)(n.p,{children:["If the defense order is ",(0,i.jsx)(n.code,{children:"DefenseOrder.Always"}),", this function will be called on every hit."]}),"\n",(0,i.jsxs)(n.p,{children:["If the defense order is ",(0,i.jsx)(n.code,{children:"DefenseOrder.CollisionOnly"}),", this function will be called after intangibility is determined to not block the attack."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"judge"}),": ",(0,i.jsx)(n.a,{href:"#defensejudge",children:"DefenseJudge"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"attacker"}),": ",(0,i.jsx)(n.a,{href:"/client/lua-api/entity-api/entity",children:"Entity"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"defender"}),": ",(0,i.jsx)(n.a,{href:"/client/lua-api/entity-api/entity",children:"Entity"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hit_props"}),": ",(0,i.jsx)(n.a,{href:"/client/lua-api/attack-api/hit-props",children:"HitProps"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"defense_rulefilter_statuses_func--functionhit_props-hitprops",children:(0,i.jsx)(n.code,{children:"defense_rule.filter_statuses_func = function(hit_props): HitProps"})}),"\n",(0,i.jsx)(n.p,{children:"Called before applying damage and statuses to the entity."}),"\n",(0,i.jsxs)(n.p,{children:["Should return ",(0,i.jsx)(n.a,{href:"/client/lua-api/attack-api/hit-props",children:"HitProps"})]}),"\n",(0,i.jsx)(n.p,{children:"The return value replaces the HitProps applied to the entity."}),"\n",(0,i.jsx)(n.h2,{id:"defensevirusbody",children:"DefenseVirusBody"}),"\n",(0,i.jsx)(n.h3,{id:"defensevirusbodynew",children:(0,i.jsx)(n.code,{children:"DefenseVirusBody.new()"})}),"\n",(0,i.jsxs)(n.p,{children:["Returns a DefenseRule with ",(0,i.jsx)(n.code,{children:"DefensePriority.Body"})," and ",(0,i.jsx)(n.code,{children:"DefenseOrder.CollisionOnly"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Filters ",(0,i.jsx)(n.code,{children:"Hit.Flinch"})," and ",(0,i.jsx)(n.code,{children:"Hit.Flash"})," flags during status filtering."]}),"\n",(0,i.jsx)(n.h2,{id:"defensejudge",children:"DefenseJudge"}),"\n",(0,i.jsx)(n.p,{children:"Created for each attack resolution and passed through DefenseRule callbacks."}),"\n",(0,i.jsx)(n.h3,{id:"judgeblock_damage",children:(0,i.jsx)(n.code,{children:"judge:block_damage()"})}),"\n",(0,i.jsx)(n.p,{children:"Prevents damage and statuses from applying to the defending entity."}),"\n",(0,i.jsx)(n.h3,{id:"judgeblock_impact",children:(0,i.jsx)(n.code,{children:"judge:block_impact()"})}),"\n",(0,i.jsxs)(n.p,{children:["Used to mark ",(0,i.jsx)(n.code,{children:"Hit.Impact"})," as handled / retaliated."]}),"\n",(0,i.jsxs)(n.p,{children:["Does not strip ",(0,i.jsx)(n.code,{children:"Hit.Impact"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"judgedamage_blocked",children:(0,i.jsx)(n.code,{children:"judge:damage_blocked()"})}),"\n",(0,i.jsxs)(n.p,{children:["Returns true if ",(0,i.jsx)(n.code,{children:"judge:block_damage()"})," was called."]}),"\n",(0,i.jsx)(n.h3,{id:"judgeimpact_blocked",children:(0,i.jsx)(n.code,{children:"judge:impact_blocked()"})}),"\n",(0,i.jsxs)(n.p,{children:["Returns true if ",(0,i.jsx)(n.code,{children:"judge:block_impact()"})," was called."]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,d)=>{d.d(n,{R:()=>r,x:()=>c});var i=d(6540);const l={},s=i.createContext(l);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);